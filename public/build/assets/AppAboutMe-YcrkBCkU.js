import{P as s}from"./PictureInput-B0ONgMPm.js";import{A as l}from"./AppLayout-BImsDSli.js";import{B as r}from"./BreadCrumbs-BH02ZRtw.js";import{n as c}from"./_plugin-vue2_normalizer-p4i_2SC9.js";import"./SettingsDropdown-D9hkqat8.js";import"./app-BzUSuKBB.js";import"./logo-Cxn_AZdb.js";const d={components:{AppLayout:l,BreadCrumbs:r,"picture-input":s},props:["data"],data(){return{isUploadImage:!1,itemTemp:null,image:null,hasUrl:null,dialog:!1,panel:[],viewAll:!1,name:"01-example",content:"",changedImage:!1,items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"¿Quién soy?",disabled:!0,href:"#"}]}},created(){this.initialize()},methods:{dimensionar(t){console.log("intento cambiar el tamaño");var a=document.getElementById(t);a.style.width="100vh",console.log(a)},add(){var t={id:"",image:"",name:"",title:"",content:"",icon:""};axios.post("/about",t).then(a=>{this.data.push(t),console.log(a.data),this.$swal("Buen trabajo!","Iten adiccionado de manera exitosa!","success")}).catch(a=>{this.$swal("Lo sentimos!","Algo ha ido mal!","error")})},edit(t){var a=this.data.indexOf(t),e=document.getElementById(`imagen${t.id}`).files[0];console.log(t.image);var n=new FormData;e!==void 0?n.append("image",e):n.append("image",t.image.replace("/storage/","")),n.append("image",t.image),console.log("image",t.image),n.append("title",t.title),console.log("title: ",t.title),n.append("name",t.name),console.log("name: ",t.name),n.append("icon",t.icon),console.log("icon: ",t.icon),n.append("content",t.content),console.log("content: ",t.content),console.log("enviado: ",n),axios.post(`/about/update/${t.id}`,n).then(i=>{console.log("data: ",i.data);var o=i.data;e=void 0,console.log("item ",this.data[a]),this.data[a].image=`/storage/${o.image}`,console.log("data ",this.data),this.$swal("Buen trabajo!","Información modificada con éxito!","success")}).catch(i=>{this.$swal("Lo sentimos!","Algo ha ido mal en la modificación!","error")})},remove(t){this.$swal({title:"¿Estas seguro?",text:"No podrás revertir esto!",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, elimínar!"}).then(a=>{a.value&&axios.delete(`/about/${t.id}`).then(e=>{console.log(e.data);const n=this.data.indexOf(t);this.data.splice(n,1),this.$swal("Buen trabajo!","Información eliminada con éxito!","success")}).catch(e=>{this.$swal("Lo sentimos!","Algo ha ido mal!","error")})})},initialize(){console.log("for each"),this.data.forEach(function(t){t.image="/storage/"+t.image,console.log(t.image)})},onFileChange(t){this.changedImage=!0;var a=document.getElementById(`imagen${t.id}`),e=a.files[0];console.log(e);const n=this.data.indexOf(t);let i=Object.assign({},t);i.image=window.URL.createObjectURL(e),Object.assign(this.data[n],i),console.log(this.data)}},watch:{viewAll(t){t?this.panel=[...Array(this.data.length).keys()].map((a,e)=>e):this.panel=[],console.log()}}};var u=function(){var a=this,e=a._self._c;return e("app-layout",[e("bread-crumbs",{attrs:{name:"¿Quién soy?",items:a.items}}),e("v-container",{attrs:{fluid:""}},[e("v-card",{staticClass:"rounded-0"},[e("v-toolbar",{attrs:{flat:""}},[e("v-toolbar-title",[a._v("¿Quién soy?")]),e("v-spacer"),e("div",[e("v-switch",{attrs:{label:"Expandir todos","hide-details":""},model:{value:a.viewAll,callback:function(n){a.viewAll=n},expression:"viewAll"}})],1)],1),e("v-banner",{scopedSlots:a._u([{key:"actions",fn:function(){return[e("v-btn",{attrs:{text:"",color:"deep-purple accent-4"},on:{click:a.add}},[a._v(" Agregar Item ")])]},proxy:!0}])},[a._v(" En esta sesión esta a disponibilidad del usuario registrar la información pertinente en cada item. recuerda dar click en la opción que deseas editar o puedes mostrar todos ")]),e("v-card-text",{staticClass:"grey lighten-4"},[e("v-row",{attrs:{justify:"center"}},[e("v-expansion-panels",{attrs:{popout:"",focusable:"",multiple:""},model:{value:a.panel,callback:function(n){a.panel=n},expression:"panel"}},a._l(a.data,function(n,i){return e("v-expansion-panel",{key:i,attrs:{id:`panelInterno${i}`},on:{click:function(o){return a.dimensionar(`panelInterno${i}`)}}},[e("v-expansion-panel-header",[e("span",[e("v-avatar",{attrs:{size:"36",color:"grey lighten-2"}},[e("v-icon",{attrs:{dark:"",color:"grey darken-3"}},[a._v(" "+a._s(n.icon)+" ")])],1),a._v(" "+a._s(n.name)+" ")],1)]),e("v-expansion-panel-content",[e("v-card",{staticClass:"mt-5",attrs:{outlined:""}},[e("v-card-title",{attrs:{"primary-title":""}},[e("v-spacer"),e("v-btn",{attrs:{icon:"",color:"red light"},on:{click:function(o){return a.remove(n)}}},[e("v-icon",[a._v("mdi-delete")])],1)],1),e("v-card-title"),e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a._v(" "+a._s(n.image)+" "),e("v-card",{staticClass:"elevation-12"},[e("v-img",{attrs:{height:"300px",src:n.image}}),e("v-card-actions",[e("v-file-input",{attrs:{id:`imagen${n.id}`,label:"Elige una imagen","prepend-icon":"mdi-camera"},on:{change:function(o){return a.onFileChange(n)}}})],1)],1)],1)],1),e("v-card-text",[e("v-text-field",{attrs:{label:"Titulo"},model:{value:n.title,callback:function(o){a.$set(n,"title",o)},expression:"item.title"}}),a._v(" Contenido "),e("vue-editor",{ref:"myTextEditor",refInFor:!0,model:{value:n.content,callback:function(o){a.$set(n,"content",o)},expression:"item.content"}}),e("v-row",[e("v-col",[e("v-text-field",{attrs:{label:"Icono"},model:{value:n.icon,callback:function(o){a.$set(n,"icon",o)},expression:"item.icon"}})],1),e("v-col",[e("v-text-field",{attrs:{label:"Nombre"},model:{value:n.name,callback:function(o){a.$set(n,"name",o)},expression:"item.name"}})],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"primary"},on:{click:function(o){return a.edit(n)}}},[a._v(" Guardar Cambios ")])],1)],1)],1)],1)}),1)],1)],1)],1)],1)],1)},p=[],m=c(d,u,p,!1,null,null);const $=m.exports;export{$ as default};
