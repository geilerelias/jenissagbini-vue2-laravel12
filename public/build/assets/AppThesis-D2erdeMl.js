import{n as l}from"./_plugin-vue2_normalizer-p4i_2SC9.js";const r={data:()=>({menu:!1,dialog:!1,headers:[{text:"Id",align:"left",sortable:!1,value:"id"},{text:"Titulo",value:"title"},{text:"A√±o",value:"year"},{text:"Entidad",value:"entity"},{text:"Accion",align:"left",sortable:!1,value:"action"}],items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Proyectos",disabled:!1,href:"/dashboard/project"},{text:"Tesis de Grado Dirigidas",disabled:!0,href:"/dashboard/project/thesis"}],thesiss:[],editedIndex:-1,editedItem:{title:"",year:"",entity:"",people:""},defaultItem:{title:"",year:"",entity:"",people:""},search:"",valid:!0,titleRules:[s=>!!s||"Titulo es requirido"],yearRules:[s=>!!s||"A√±o es requerido"],entityRules:[s=>!!s||"Entidad promotora es requerida"],peopleRules:[s=>/^[A-Za-z√±√°√©√≠√≥√∫√ë√Å√â√ç√ì√ö. ]*$/.test(s)||"Nombre de Personas dirigidas validos"],lazy:!1}),computed:{formTitle(){return this.editedIndex===-1?"Nuevo Item":"Editar Item"}},watch:{dialog(s){s||this.close()}},mounted(){this.initialize()},methods:{initialize(){this.thesiss=[{id:0,title:"EMPRENDIMIENTO DIGITAL ‚ÄúSOMOS UNO‚Äù.",created_at:"2019-10-11 03:09:46",updated_at:"2019-10-11 03:09:46",year:"2018-01",entity:"Universidad Popular del Cesar. ",people:"Aldair Nu√±ez Florian."}],this.axios.get("/api/thesis").then(s=>{this.thesiss=this.thesiss.concat(s.data)}).catch(s=>{console.log(s)})},editItem(s){this.editedIndex=this.thesiss.indexOf(s),this.editedItem=Object.assign({},s),this.dialog=!0},deleteItem(s){const e=this.thesiss.indexOf(s);Swal.fire({title:"Est√°s seguro?",html:`Eliminar <b>${s.title}</b>, No podr√°s revertir esto!`,type:"warning",showCancelButton:!0,confirmButtonColor:"#424242",cancelButtonColor:"#d33",confirmButtonText:"S√≠,, Eliminar!"}).then(t=>{console.log("item.id",s.id),t.value&&axios.delete(`/api/thesis/${s.id}`).then(i=>{Swal.fire("Eliminado!","Eliminado correctamente.","success"),this.thesiss.splice(e,1)}).catch(i=>{Swal.fire("Oops...","Algo sali√≥ mal!"+i,"error")})})},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},save(){if(this.validate())if(this.editedIndex>-1)this.edit();else{const s=this.editedItem;axios.post("/api/thesis",s).then(e=>{const t=e.data;this.thesiss.push(t),Swal.fire("Buen trabajo! üòÉ","Registro Exitoso! ","success")}).catch(e=>{console.error(e)}),this.close()}else Swal.fire({type:"error",title:"Oops...",text:"Campos no validados!"})},edit(){const s=this.editedItem,e=this.editedIndex,t=this.editedItem;axios.put(`/api/thesis/${this.thesiss[e].id}`,s).then(i=>{Object.assign(this.thesiss[e],t),Swal.fire("Buen trabajo!","Editado correctamente!","success"),this.close()}).catch(i=>{Swal.fire({type:"error",title:"Oops...",text:"Algo sali√≥ mal!"})})},validate(){return this.$refs.form.validate()?!0:(console.log("fallo la validacion"),!1)},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()}}};var o=function(){var e=this,t=e._self._c;return t("v-app",[t("v-breadcrumbs",{attrs:{items:e.items}}),t("v-card",[t("v-toolbar",{attrs:{dark:"",flat:""}},[t("v-btn",{attrs:{icon:""},on:{click:function(i){return e.$router.push({name:"project/main"})}}},[t("v-icon",[e._v("mdi-arrow-left")])],1),t("v-toolbar-title",[e._v("Tesis de Grado Dirigidas ")]),t("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t("div",{staticClass:"flex-grow-1"}),t("v-text-field",{attrs:{"max-width":"200","append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(i){e.search=i},expression:"search"}}),t("v-btn",{attrs:{icon:""},on:{click:function(i){e.dialog=!e.dialog}}},[t("v-icon",[e._v("mdi-plus-circle")])],1)],1),t("v-data-table",{staticClass:"elevation-1",attrs:{search:e.search,headers:e.headers,items:e.thesiss},scopedSlots:e._u([{key:"item.action",fn:function({item:i}){return[t("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),t("v-icon",{attrs:{small:""},on:{click:function(a){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0}])})],1),t("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(i){e.dialog=i},expression:"dialog"}},[t("v-card",[t("v-toolbar",{attrs:{dark:""}},[t("v-btn",{attrs:{icon:"",dark:""},on:{click:function(i){e.dialog=!e.dialog}}},[t("v-icon",[e._v("mdi-close")])],1),t("v-toolbar-title",{staticClass:"headline"},[e._v(e._s(e.formTitle))]),t("div",{staticClass:"flex-grow-1"}),t("v-toolbar-items",[t("v-btn",{staticClass:"mr-4",attrs:{text:"",disabled:!e.valid},on:{click:e.validate}},[e._v(" Registrar ")])],1)],1),t("v-card-text",[t("v-container",{attrs:{fluid:""}},[t("v-form",{ref:"form",attrs:{"lazy-validation":e.lazy},model:{value:e.valid,callback:function(i){e.valid=i},expression:"valid"}},[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-text-field",{attrs:{clearable:"",rules:e.titleRules,label:"Titulo",required:""},model:{value:e.editedItem.title,callback:function(i){e.$set(e.editedItem,"title",i)},expression:"editedItem.title"}})],1),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-text-field",{attrs:{clearable:"",rules:e.entityRules,label:"Entidad promotora",required:""},model:{value:e.editedItem.entity,callback:function(i){e.$set(e.editedItem,"entity",i)},expression:"editedItem.entity"}})],1),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.editedItem.year,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(i){return e.$set(e.editedItem,"year",i)},"update:return-value":function(i){return e.$set(e.editedItem,"year",i)}},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t("v-text-field",e._g({attrs:{rules:e.yearRules,label:"Fecha",readonly:""},model:{value:e.editedItem.year,callback:function(a){e.$set(e.editedItem,"year",a)},expression:"editedItem.year"}},i))]}}]),model:{value:e.menu,callback:function(i){e.menu=i},expression:"menu"}},[t("v-date-picker",{attrs:{type:"month",locale:"es","no-title":"",scrollable:""},model:{value:e.editedItem.year,callback:function(i){e.$set(e.editedItem,"year",i)},expression:"editedItem.year"}},[t("div",{staticClass:"flex-grow-1"}),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(i){e.menu=!1}}},[e._v("Cancel")]),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(i){return e.$refs.menu.save(e.editedItem.year)}}},[e._v("OK")])],1)],1)],1),t("v-col",{attrs:{cols:"12"}},[t("v-textarea",{attrs:{clearable:"",rules:e.peopleRules,label:"Personas orientadas"},model:{value:e.editedItem.people,callback:function(i){e.$set(e.editedItem,"people",i)},expression:"editedItem.people"}})],1)],1)],1)],1)],1),t("v-card-actions",[t("div",{staticClass:"flex-grow-1"}),t("v-btn",{staticClass:"mr-4",attrs:{color:"warning"},on:{click:e.close}},[e._v(" Cancelar ")]),t("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" Reiniciar ")]),t("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success"},on:{click:e.save}},[e._v(" Guardar ")])],1)],1)],1)],1)},n=[],d=l(r,o,n,!1,null,null);const u=d.exports;export{u as default};
