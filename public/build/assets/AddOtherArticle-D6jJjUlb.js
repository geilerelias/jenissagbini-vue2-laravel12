import{n as s}from"./_plugin-vue2_normalizer-p4i_2SC9.js";const r={components:{},props:["formTitle","editedIndex","editedItem","idItem"],data(){return{isActive:!1,loaded:!1,src:"",file:null,fileUrl:null,show:!0,numPages:0,rotate:0,valid:!0,titleRules:[i=>!!i||"Titulo es requerido"],descriptionRules:[i=>!!i||"Descripción es requerida"],fileRules:[i=>!!i||"El archivo es requerido"],lazy:!1,indexArticle:-1,editedArticle:{id:"",title:"",description:"",file:null},defaultItem:{id:"",title:"",description:"",file:null}}},methods:{Change(){let i=new FileReader;i.onload=()=>{this.fileUrl=i.result},console.log(i.readAsDataURL(this.editedArticle.file))},error:function(i){console.log(i)},save(){if(this.validate())if(this.editedIndex>-1)this.edit();else{let i=new FormData;i.append("title",this.editedArticle.title),i.append("description",this.editedArticle.description),i.append("file",this.editedArticle.file),console.log(i),axios.post("/articles/others",i).then(e=>{const t=e.data;this.$emit("addOthersArticles",t),this.$swal("Buen trabajo! 😃","Registro Exitoso! ","success")}).catch(e=>{console.error(e)}),this.close()}else this.$swal({type:"error",title:"Oops...",text:"Campos no validados!"})},edit(){const i=this.editedArticle;this.editedIndex;let e=new FormData;e.append("title",this.editedArticle.title),e.append("description",this.editedArticle.description),e.append("file",this.editedArticle.file),axios.post(`/articles/others/update/${this.idItem}`,e).then(t=>{this.$emit("updateArrayOfOthersArticles",i),this.$swal("Buen trabajo!","Editado correctamente!","success"),this.close()}).catch(t=>{this.$swal({type:"error",title:"Oops...",text:"Algo salió mal!"})})},validate(){return this.$refs.form.validate()?!0:(console.log("fallo la validación"),!1)},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()},close(){this.$emit("closeDialog",!1),setTimeout(()=>{this.editedArticle=Object.assign({},this.defaultItem),this.file=this.defaultItem.file,this.$emit("editedItem",this.editedArticle),this.indexArticle=-1,this.$emit("editedIndex",this.indexArticle),this.reset()},300)},onChange(i){console.log("Se presento un cambio file",i)}}};var a=function(){var e=this,t=e._self._c;return t("div",[t("v-toolbar",{staticStyle:{"border-radius":"0"},attrs:{dark:""}},[t("v-btn",{attrs:{dark:"",icon:""},on:{click:function(l){return e.close()}}},[t("v-icon",[e._v("mdi-close")])],1),t("v-toolbar-title",{staticClass:"headline"},[e._v("Agregar nuevo articulo")]),t("div",{staticClass:"flex-grow-1"}),t("v-toolbar-items",[t("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,text:""},on:{click:e.validate}},[e._v(" Registrar ")])],1)],1),t("v-card-text",[t("v-container",{attrs:{fluid:""}},[t("v-form",{ref:"form",attrs:{"lazy-validation":e.lazy,enctype:"multipart/form-data"},model:{value:e.valid,callback:function(l){e.valid=l},expression:"valid"}},[t("v-row",[t("v-col",{attrs:{cols:"12",md:"4",sm:"6"}},[t("v-text-field",{attrs:{rules:e.titleRules,clearable:"",label:"Titulo","prepend-icon":"mdi-format-title",required:""},model:{value:e.editedArticle.title,callback:function(l){e.$set(e.editedArticle,"title",l)},expression:"editedArticle.title"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-textarea",{attrs:{rules:e.descriptionRules,clearable:"",label:"Descripción","prepend-icon":"mdi-text"},model:{value:e.editedArticle.description,callback:function(l){e.$set(e.editedArticle,"description",l)},expression:"editedArticle.description"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-file-input",{ref:"file",attrs:{change:e.onChange(e.file),rules:e.fileRules,accept:".pdf",label:"Seleccione un archivo","single-line":""},model:{value:e.editedArticle.file,callback:function(l){e.$set(e.editedArticle,"file",l)},expression:"editedArticle.file"}})],1)],1)],1)],1)],1),t("v-card-actions",[t("div",{staticClass:"flex-grow-1"}),t("v-btn",{staticClass:"mr-4",attrs:{color:"warning "},on:{click:e.close}},[e._v(" Cancelar ")]),t("v-btn",{staticClass:"mr-4",attrs:{color:"error "},on:{click:e.reset}},[e._v(" Reiniciar ")]),t("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success "},on:{click:e.save}},[e._v(" Guardar ")])],1)],1)},o=[],d=s(r,a,o,!1,null,null);const n=d.exports;export{n as default};
