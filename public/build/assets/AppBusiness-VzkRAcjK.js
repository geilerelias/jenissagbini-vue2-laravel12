import{n as r}from"./_plugin-vue2_normalizer-p4i_2SC9.js";const o={data:()=>({dialog:!1,headers:[{text:"Id",align:"left",sortable:!1,value:"id"},{text:"Titulo",value:"title"},{text:"Entidad",value:"entity"},{text:"A√±o",value:"year"},{text:"Descripci√≥n",value:"description"},{text:"Estado",value:"state"},{text:"Actions",value:"action",sortable:!1}],items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Proyectos",disabled:!1,href:"/dashboard/project"},{text:"Planes de Negocios ",disabled:!0,href:"/dashboard/project/business"}],businesses:[],editedIndex:-1,editedItem:{id:"",title:"",description:"",year:"",entity:"",state:""},defaultItem:{id:"",title:"",description:"",year:"",entity:"",state:""},states:["Abierto","Cerrado","Terminado"],search:"",valid:!0,titleRules:[i=>!!i||"Titulo es requirido"],yearRules:[i=>!!i||"A√±o es requerido"],entityRules:[i=>!!i||"Entidad promotora es requerida"],descriptionRules:[i=>!!i||"Descripci√≥n es requerida"],stateRules:[i=>!!i||"Estado  es requerido"],states:["Abierto","Cerrado","Terminado"],lazy:!1}),computed:{formTitle(){return this.editedIndex===-1?"New Item":"Edit Item"}},watch:{dialog(i){i||this.close()}},mounted(){this.initialize()},methods:{initialize(){this.businesses=[{title:`
                        PLAN DE NEGOCIO ‚ÄúCREACIOÃÅN DE UNA COMERCIALIZADORA DE SEMOVIENTES, PRODUCTOS Y SERVICIOS PECUARIOS EN LA ZONA NORTE
                        DEL DEPARTAMENTO DEL CESAR‚Äù.
                      `,description:`
                        Plan de Negocios orientado a la creaci√≥n de una empresa digital regional lamada ‚ÄúGanaventas‚Äù en el sector
                        agrario cuyas principales actividades son: AsesoriÃÅas y evaluacioÃÅn de proyectos productivos destinados al sector pecuario,
                        Comercializar Ganados, compra y venta de tierra, maquinaria usadas agriÃÅcolas.
                      `,state:"Terminado",id:0}],this.axios.get("/api/business").then(i=>{this.businesses=this.businesses.concat(i.data)}).catch(i=>{console.log(i)})},editItem(i){this.editedIndex=this.businesses.indexOf(i),this.editedItem=Object.assign({},i),this.dialog=!0},deleteItem(i){const e=this.businesses.indexOf(i);Swal.fire({title:"Est√°s seguro?",html:`Eliminar <b>${i.title}</b>, No podr√°s revertir esto!`,type:"warning",showCancelButton:!0,confirmButtonColor:"#424242",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!"}).then(t=>{console.log("item.id",i.id),t.value&&axios.delete(`/api/business/${i.id}`).then(s=>{Swal.fire("Eliminado!","Eliminado correctamente.","success"),this.businesses.splice(e,1)}).catch(s=>{Swal.fire("Oops...","Algo sali√≥ mal!"+s,"error")})})},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},save(){if(this.validate())if(this.editedIndex>-1)this.edit();else{const i=this.editedItem;axios.post("/api/business",i).then(e=>{const t=e.data;this.businesses.push(t),Swal.fire("Buen trabajo! üòÉ","Registro Exitoso! ","success")}).catch(e=>{console.error(e)}),this.close()}else Swal.fire({type:"error",title:"Oops...",text:"Campos no validados!"})},edit(){const i=this.editedItem,e=this.editedIndex,t=this.editedItem;axios.put(`/api/business/${this.businesses[e].id}`,i).then(s=>{Object.assign(this.businesses[e],t),Swal.fire("Buen trabajo!","Editado correctamente!","success"),this.close()}).catch(s=>{Swal.fire({type:"error",title:"Oops...",text:"Algo sali√≥ mal!"})})},validate(){return this.$refs.form.validate()?!0:(console.log("fallo la validacion"),!1)},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()}}};var l=function(){var e=this,t=e._self._c;return t("v-app",[t("v-breadcrumbs",{attrs:{items:e.items}}),t("v-card",[t("v-toolbar",{attrs:{dark:"",flat:""}},[t("v-btn",{attrs:{icon:""},on:{click:function(s){return e.$router.push({name:"project/main"})}}},[t("v-icon",[e._v("mdi-arrow-left")])],1),t("v-toolbar-title",[e._v("Planes de Negocios Desarrollados")]),t("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t("div",{staticClass:"flex-grow-1"}),t("v-text-field",{attrs:{"max-width":"200","append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(s){e.search=s},expression:"search"}}),t("v-btn",{attrs:{icon:""},on:{click:function(s){e.dialog=!e.dialog}}},[t("v-icon",[e._v("mdi-plus-circle")])],1)],1),t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,search:e.search,items:e.businesses},scopedSlots:e._u([{key:"item.action",fn:function({item:s}){return[t("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItem(s)}}},[e._v(" mdi-pencil ")]),t("v-icon",{attrs:{small:""},on:{click:function(a){return e.deleteItem(s)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0}])})],1),t("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(s){e.dialog=s},expression:"dialog"}},[t("v-card",[t("v-toolbar",{attrs:{dark:""}},[t("v-btn",{attrs:{icon:"",dark:""},on:{click:function(s){e.dialog=!e.dialog}}},[t("v-icon",[e._v("mdi-close")])],1),t("v-toolbar-title",{staticClass:"headline"},[e._v(e._s(e.formTitle))]),t("div",{staticClass:"flex-grow-1"}),t("v-toolbar-items",[t("v-btn",{staticClass:"mr-4",attrs:{text:"",disabled:!e.valid},on:{click:e.validate}},[e._v(" Registrar ")])],1)],1),t("v-card-text",[t("v-container",[t("v-form",{ref:"form",attrs:{"lazy-validation":e.lazy},model:{value:e.valid,callback:function(s){e.valid=s},expression:"valid"}},[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-text-field",{attrs:{clearable:"",rules:e.titleRules,label:"Titulo",required:""},model:{value:e.editedItem.title,callback:function(s){e.$set(e.editedItem,"title",s)},expression:"editedItem.title"}})],1),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-text-field",{attrs:{clearable:"",rules:e.entityRules,label:"Entidad promotora",required:""},model:{value:e.editedItem.entity,callback:function(s){e.$set(e.editedItem,"entity",s)},expression:"editedItem.entity"}})],1),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.editedItem.year,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(s){return e.$set(e.editedItem,"year",s)},"update:return-value":function(s){return e.$set(e.editedItem,"year",s)}},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t("v-text-field",e._g({attrs:{rules:e.yearRules,label:"Fecha",readonly:""},model:{value:e.editedItem.year,callback:function(a){e.$set(e.editedItem,"year",a)},expression:"editedItem.year"}},s))]}}]),model:{value:e.menu,callback:function(s){e.menu=s},expression:"menu"}},[t("v-date-picker",{attrs:{type:"month",locale:"es","no-title":"",scrollable:""},model:{value:e.editedItem.year,callback:function(s){e.$set(e.editedItem,"year",s)},expression:"editedItem.year"}},[t("div",{staticClass:"flex-grow-1"}),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(s){e.menu=!1}}},[e._v("Cancel")]),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(s){return e.$refs.menu.save(e.editedItem.year)}}},[e._v("OK")])],1)],1)],1),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-select",{attrs:{rules:e.stateRules,items:e.states,"menu-props":{top:!0,offsetY:!0},label:"Estado"},model:{value:e.editedItem.state,callback:function(s){e.$set(e.editedItem,"state",s)},expression:"editedItem.state"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-textarea",{attrs:{clearable:"",rules:e.descriptionRules,label:"Descripci√≥n"},model:{value:e.editedItem.description,callback:function(s){e.$set(e.editedItem,"description",s)},expression:"editedItem.description"}})],1)],1)],1)],1)],1),t("v-card-actions",[t("div",{staticClass:"flex-grow-1"}),t("v-btn",{staticClass:"mr-4",attrs:{color:"warning"},on:{click:e.close}},[e._v(" Cancelar ")]),t("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" Reiniciar ")]),t("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success"},on:{click:e.save}},[e._v(" Guardar ")])],1)],1)],1)],1)},n=[],d=r(o,l,n,!1,null,"17df3283");const u=d.exports;export{u as default};
