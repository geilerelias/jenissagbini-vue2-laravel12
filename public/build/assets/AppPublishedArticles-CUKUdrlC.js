import{A as l}from"./AppLayout-BImsDSli.js";import{B as r}from"./BreadCrumbs-BH02ZRtw.js";import{n}from"./_plugin-vue2_normalizer-p4i_2SC9.js";import"./SettingsDropdown-D9hkqat8.js";import"./app-BzUSuKBB.js";import"./logo-Cxn_AZdb.js";const o={components:{AppLayout:l,BreadCrumbs:r},props:["publishedArticles"],data:()=>({overlay:!1,menu:!1,dialog:!1,headers:[{text:"Id",align:"left",sortable:!1,value:"id"},{text:"Titulo",value:"title"},{text:"A침o",value:"year"},{text:"ISBN",value:"isbn"},{text:"Enlace",value:"link"},{text:"Accion",align:"left",sortable:!1,value:"action"}],items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Art칤culos",disabled:!1,href:"/dashboard/articles"},{text:"Art칤culos publicados",disabled:!0,href:"#"}],editedIndex:-1,editedItem:{id:"",title:"",description:"",year:"",country:"",isbn:"",ed:"",link:"",file:null},defaultItem:{id:"",title:"",description:"",year:"",country:"",isbn:"",ed:"",link:"",file:null},search:"",valid:!0,titleRules:[i=>!!i||"Titulo es requerido"],yearRules:[i=>!!i||"A침o es requerido"],countryRules:[i=>!!i||"Pa칤s promotor es requerido"],descriptionRules:[i=>!!i||"Descripci칩n es requerida"],linkRules:[i=>/^(http|https)/.test(i)||"Enlace no valido"],lazy:!1,countries:["Afghanistan","Albania","Algeria","Andorra","Angola","Antarctica","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burma","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo, Democratic Republic","Congo, Republic of the","Costa Rica","Cote d'Ivoire","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Greenland","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, North","Korea, South","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Mongolia","Morocco","Monaco","Mozambique","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Samoa","San Marino"," Sao Tome","Saudi Arabia","Senegal","Serbia and Montenegro","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"]}),computed:{formTitle(){return this.editedIndex===-1?"Nuevo Item":"Editar Item"}},watch:{dialog(i){i||this.close()}},mounted(){},methods:{initialize(){window.location.reload()},editItem(i){this.editedIndex=this.publishedArticles.indexOf(i),this.editedItem=Object.assign({},i),this.dialog=!0},deleteItem(i){const e=this.publishedArticles.indexOf(i);this.$swal({title:"Est치s seguro?",html:`Eliminar <b>${i.title}</b>, No podr치s revertir esto!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#424242",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!"}).then(t=>{console.log("item.id",i.id),t.value&&(this.overlay=!0,axios.delete(`/articles/published/${i.id}`).then(a=>{this.$swal("Eliminado!","Eliminado correctamente.","success"),this.publishedArticles.splice(e,1),this.overlay=!1}).catch(a=>{this.$swal("Oops...","Algo sali칩 mal!"+a,"error"),this.overlay=!1}))})},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},save(){if(this.validate())if(this.editedIndex>-1)this.edit();else{var i=new FormData;i.append("id",this.editedItem.id),i.append("title",this.editedItem.title),i.append("description",this.editedItem.description),i.append("year",this.editedItem.year),i.append("country",this.editedItem.country),i.append("isbn",this.editedItem.isbn),i.append("ed",this.editedItem.ed),i.append("link",this.editedItem.link),i.append("file",this.editedItem.file),this.overlay=!0,axios.post("/articles/published",i).then(e=>{const t=e.data;this.publishedArticles.push(t),this.$swal("Buen trabajo! 游땎","Registro Exitoso! ","success"),this.overlay=!1}).catch(e=>{console.error(e),this.overlay=!1}),this.close()}else this.$swal({type:"error",title:"Oops...",text:"Campos no validados!"})},edit(){const i=this.editedIndex,e=this.editedItem;let t=new FormData;for(let a in this.editedItem)t.append(a,this.editedItem[a]);console.log(t),this.overlay=!0,axios.post(`/articles/published/update/${this.publishedArticles[i].id}`,t).then(a=>{Object.assign(this.publishedArticles[i],e),this.$swal("Buen trabajo!","Editado correctamente!","success"),this.close(),this.overlay=!1}).catch(a=>{this.$swal({icon:"error",title:"Oops...",text:"Algo sali칩 mal!"}),this.overlay=!1})},validate(){return this.$refs.form.validate()?!0:(console.log("fallo la validacion"),!1)},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()}}};var d=function(){var e=this,t=e._self._c;return t("app-layout",[t("bread-crumbs",{attrs:{name:"Gesti칩n de Art칤culos publicados",items:e.items}}),t("v-container",{attrs:{fluid:""}},[t("v-row",{staticClass:"ma-0"},[t("v-card",{staticClass:"ma-1",staticStyle:{width:"100%"}},[t("v-card-text",{},[t("v-row",{staticClass:"no-gutters"},[t("div",{staticClass:"d-flex justify-space-between justify-md-start col-md-6 col-12"},[t("v-btn",{staticClass:"mr-3 success",on:{click:function(a){e.dialog=!e.dialog}}},[t("v-icon",{staticClass:"notranslate mr-2"},[e._v(" mdi-plus ")]),e._v(" Add ")],1),t("v-btn",{staticClass:"button-shadow primary--text",attrs:{outlined:""}},[t("v-icon",{staticClass:"notranslate mr-2",attrs:{"aria-hidden":"true"}},[e._v(" mdi-filter-variant ")]),e._v(" Filters ")],1)],1),t("v-spacer"),t("div",{staticClass:"mx-auto mt-4 mt-md-0",staticStyle:{"max-width":"250px"}},[t("v-text-field",{attrs:{"hide-details":"",dense:"",enclosed:"",outlined:"","append-icon":"mdi-magnify",placeholder:"search"},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}})],1)],1)],1)],1)],1),t("v-row",{staticClass:"ma-0"},[t("v-card",{staticClass:"ma-1",staticStyle:{width:"100%"}},[t("v-card-text",{},[t("v-data-table",{attrs:{search:e.search,headers:e.headers,items:e.publishedArticles},scopedSlots:e._u([{key:"item.action",fn:function({item:a}){return[t("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(s){return e.editItem(a)}}},[e._v(" mdi-pencil ")]),t("v-icon",{attrs:{small:""},on:{click:function(s){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0}])})],1)],1)],1)],1),t("v-dialog",{attrs:{fullscreen:"","hide-this.overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[t("v-card",[t("v-toolbar",{attrs:{dark:""}},[t("v-btn",{attrs:{icon:"",dark:""},on:{click:function(a){e.dialog=!e.dialog}}},[t("v-icon",[e._v("mdi-close")])],1),t("v-toolbar-title",{staticClass:"headline"},[e._v(e._s(e.formTitle)+" ")]),t("div",{staticClass:"flex-grow-1"}),t("v-toolbar-items",[t("v-btn",{staticClass:"mr-4",attrs:{text:"",disabled:!e.valid},on:{click:e.validate}},[e._v(" Registrar ")])],1)],1),t("v-card-text",[t("v-container",{attrs:{fluid:""}},[t("v-form",{ref:"form",attrs:{"lazy-validation":e.lazy},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{clearable:"",rules:e.titleRules,label:"Titulo",required:""},model:{value:e.editedItem.title,callback:function(a){e.$set(e.editedItem,"title",a)},expression:"editedItem.title"}})],1),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-autocomplete",{attrs:{clearable:"",rules:e.countryRules,items:e.countries,"menu-props":{top:!1,offsetY:!0},label:"Pa칤s",required:""},model:{value:e.editedItem.country,callback:function(a){e.$set(e.editedItem,"country",a)},expression:"editedItem.country"}})],1),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.editedItem.year,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(a){return e.$set(e.editedItem,"year",a)},"update:return-value":function(a){return e.$set(e.editedItem,"year",a)}},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[t("v-text-field",e._g({attrs:{rules:e.yearRules,label:"Fecha",readonly:""},model:{value:e.editedItem.year,callback:function(s){e.$set(e.editedItem,"year",s)},expression:"editedItem.year"}},a))]}}]),model:{value:e.menu,callback:function(a){e.menu=a},expression:"menu"}},[t("v-date-picker",{attrs:{type:"month",locale:"es","no-title":"",scrollable:""},model:{value:e.editedItem.year,callback:function(a){e.$set(e.editedItem,"year",a)},expression:"editedItem.year"}},[t("div",{staticClass:"flex-grow-1"}),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(a){e.menu=!1}}},[e._v("Cancel ")]),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(a){return e.$refs.menu.save(e.editedItem.year)}}},[e._v(" OK ")])],1)],1)],1),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-text-field",{attrs:{clearable:"",label:"ISBN",required:""},model:{value:e.editedItem.isbn,callback:function(a){e.$set(e.editedItem,"isbn",a)},expression:"editedItem.isbn"}})],1),t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-text-field",{attrs:{clearable:"",label:"Ed",required:""},model:{value:e.editedItem.ed,callback:function(a){e.$set(e.editedItem,"ed",a)},expression:"editedItem.ed"}})],1),t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-text-field",{attrs:{clearable:"",label:"Enlace"},model:{value:e.editedItem.link,callback:function(a){e.$set(e.editedItem,"link",a)},expression:"editedItem.link"}})],1),t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-file-input",{attrs:{"show-size":"",accept:"application/pdf",clearable:"",label:"Subir archivo "},model:{value:e.editedItem.file,callback:function(a){e.$set(e.editedItem,"file",a)},expression:"editedItem.file"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-textarea",{attrs:{clearable:"",rules:e.descriptionRules,label:"Descripci칩n"},model:{value:e.editedItem.description,callback:function(a){e.$set(e.editedItem,"description",a)},expression:"editedItem.description"}})],1)],1)],1)],1)],1),t("v-card-actions",[t("div",{staticClass:"flex-grow-1"}),t("v-btn",{staticClass:"mr-4",attrs:{color:"warning"},on:{click:e.close}},[e._v(" Cancelar ")]),t("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" Reiniciar ")]),t("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success"},on:{click:e.save}},[e._v(" Guardar ")])],1)],1)],1),t("div",{staticClass:"text-center"},[t("v-overlay",{attrs:{opacity:.9,value:e.overlay}},[t("v-row",{staticClass:"mb-6",attrs:{"no-gutters":""}},[t("v-col",{attrs:{sm:"12"}},[t("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),t("v-col",{staticClass:"mt-5"},[t("span",{staticClass:"white--text"},[e._v(" Un momento por favor, estamos procesando su solicitud ")])])],1)],1)],1)],1)},c=[],u=n(o,d,c,!1,null,null);const y=u.exports;export{y as default};
