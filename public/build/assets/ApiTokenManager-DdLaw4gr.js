import{J as p}from"./ActionMessage-C0uHe90t.js";import{J as m}from"./Modal-ChJjaleB.js";import{J as u}from"./Button-8hrt_dwt.js";import{J as d}from"./ConfirmationModal-D3u747N0.js";import{J as f}from"./DangerButton-D8UoYn71.js";import{J as k}from"./DialogModal-CnXURv-O.js";import{J as v,a as y}from"./Label-BNNDC3dx.js";import{J as g,a as A}from"./InputError-Dx9YIMf4.js";import{J as T}from"./SecondaryButton-2z-8QQ4A.js";import{J as _}from"./SectionBorder-_QZAHpvL.js";import{n as h}from"./_plugin-vue2_normalizer-p4i_2SC9.js";import"./SectionTitle-B1Xdl0zD.js";const F={components:{JetActionMessage:p,JetActionSection:m,JetButton:u,JetConfirmationModal:d,JetDangerButton:f,JetDialogModal:k,JetFormSection:y,JetInput:A,JetInputError:g,JetLabel:v,JetSecondaryButton:T,JetSectionBorder:_},props:["tokens","availablePermissions","defaultPermissions"],data(){return{createApiTokenForm:this.$inertia.form({name:"",permissions:this.defaultPermissions},{bag:"createApiToken",resetOnSuccess:!0}),updateApiTokenForm:this.$inertia.form({permissions:[]},{resetOnSuccess:!1,bag:"updateApiToken"}),deleteApiTokenForm:this.$inertia.form(),displayingToken:!1,managingPermissionsFor:null,apiTokenBeingDeleted:null}},methods:{createApiToken(){this.createApiTokenForm.post(route("api-tokens.store"),{preserveScroll:!0}).then(s=>{this.createApiTokenForm.hasErrors()||(this.displayingToken=!0)})},manageApiTokenPermissions(s){this.updateApiTokenForm.permissions=s.abilities,this.managingPermissionsFor=s},updateApiToken(){this.updateApiTokenForm.put(route("api-tokens.update",this.managingPermissionsFor),{preserveScroll:!0,preserveState:!0}).then(s=>{this.managingPermissionsFor=null})},confirmApiTokenDeletion(s){this.apiTokenBeingDeleted=s},deleteApiToken(){this.deleteApiTokenForm.delete(route("api-tokens.destroy",this.apiTokenBeingDeleted),{preserveScroll:!0,preserveState:!0}).then(()=>{this.apiTokenBeingDeleted=null})},fromNow(s){return moment(s).local().fromNow()}}};var x=function(){var e=this,t=e._self._c;return t("div",[t("jet-form-section",{on:{submitted:e.createApiToken},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Create API Token ")]},proxy:!0},{key:"description",fn:function(){return[e._v(" API tokens allow third-party services to authenticate with our application on your behalf. ")]},proxy:!0},{key:"form",fn:function(){return[t("div",{staticClass:"col-span-6 sm:col-span-4"},[t("jet-label",{attrs:{for:"name",value:"Name"}}),t("jet-input",{staticClass:"mt-1 block w-full",attrs:{id:"name",type:"text",autofocus:""},model:{value:e.createApiTokenForm.name,callback:function(n){e.$set(e.createApiTokenForm,"name",n)},expression:"createApiTokenForm.name"}}),t("jet-input-error",{staticClass:"mt-2",attrs:{message:e.createApiTokenForm.error("name")}})],1),e.availablePermissions.length>0?t("div",{staticClass:"col-span-6"},[t("jet-label",{attrs:{for:"permissions",value:"Permissions"}}),t("div",{staticClass:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},e._l(e.availablePermissions,function(n){return t("div",{key:n},[t("label",{staticClass:"flex items-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.createApiTokenForm.permissions,expression:"createApiTokenForm.permissions"}],staticClass:"form-checkbox",attrs:{type:"checkbox"},domProps:{value:n,checked:Array.isArray(e.createApiTokenForm.permissions)?e._i(e.createApiTokenForm.permissions,n)>-1:e.createApiTokenForm.permissions},on:{change:function(i){var o=e.createApiTokenForm.permissions,a=i.target,l=!!a.checked;if(Array.isArray(o)){var c=n,r=e._i(o,c);a.checked?r<0&&e.$set(e.createApiTokenForm,"permissions",o.concat([c])):r>-1&&e.$set(e.createApiTokenForm,"permissions",o.slice(0,r).concat(o.slice(r+1)))}else e.$set(e.createApiTokenForm,"permissions",l)}}}),t("span",{staticClass:"ml-2 text-sm text-gray-600"},[e._v(e._s(n))])])])}),0)],1):e._e()]},proxy:!0},{key:"actions",fn:function(){return[t("jet-action-message",{staticClass:"mr-3",attrs:{on:e.createApiTokenForm.recentlySuccessful}},[e._v(" Created. ")]),t("jet-button",{class:{"opacity-25":e.createApiTokenForm.processing},attrs:{disabled:e.createApiTokenForm.processing}},[e._v(" Create ")])]},proxy:!0}])}),e.tokens.length>0?t("div",[t("jet-section-border"),t("div",{staticClass:"mt-10 sm:mt-0"},[t("jet-action-section",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Manage API Tokens ")]},proxy:!0},{key:"description",fn:function(){return[e._v(" You may delete any of your existing tokens if they are no longer needed. ")]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"space-y-6"},e._l(e.tokens,function(n){return t("div",{key:n.id,staticClass:"flex items-center justify-between"},[t("div",[e._v(" "+e._s(n.name)+" ")]),t("div",{staticClass:"flex items-center"},[n.last_used_at?t("div",{staticClass:"text-sm text-gray-400"},[e._v(" Last used "+e._s(e.fromNow(n.last_used_at))+" ")]):e._e(),e.availablePermissions.length>0?t("button",{staticClass:"cursor-pointer ml-6 text-sm text-gray-400 underline focus:outline-none",on:{click:function(i){return e.manageApiTokenPermissions(n)}}},[e._v(" Permissions ")]):e._e(),t("button",{staticClass:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",on:{click:function(i){return e.confirmApiTokenDeletion(n)}}},[e._v(" Delete ")])])])}),0)]},proxy:!0}],null,!1,44834205)})],1)],1):e._e(),t("jet-dialog-modal",{attrs:{show:e.displayingToken},on:{close:function(n){e.displayingToken=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" API Token ")]},proxy:!0},{key:"content",fn:function(){return[t("div",[e._v(" Please copy your new API token. For your security, it won't be shown again. ")]),e.$page.jetstream.flash.token?t("div",{staticClass:"mt-4 bg-gray-100 px-4 py-2 rounded font-mono text-sm text-gray-500"},[e._v(" "+e._s(e.$page.jetstream.flash.token)+" ")]):e._e()]},proxy:!0},{key:"footer",fn:function(){return[t("jet-secondary-button",{nativeOn:{click:function(n){e.displayingToken=!1}}},[e._v(" Close ")])]},proxy:!0}])}),t("jet-dialog-modal",{attrs:{show:e.managingPermissionsFor},on:{close:function(n){e.managingPermissionsFor=null}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" API Token Permissions ")]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-4"},e._l(e.availablePermissions,function(n){return t("div",{key:n},[t("label",{staticClass:"flex items-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.updateApiTokenForm.permissions,expression:"updateApiTokenForm.permissions"}],staticClass:"form-checkbox",attrs:{type:"checkbox"},domProps:{value:n,checked:Array.isArray(e.updateApiTokenForm.permissions)?e._i(e.updateApiTokenForm.permissions,n)>-1:e.updateApiTokenForm.permissions},on:{change:function(i){var o=e.updateApiTokenForm.permissions,a=i.target,l=!!a.checked;if(Array.isArray(o)){var c=n,r=e._i(o,c);a.checked?r<0&&e.$set(e.updateApiTokenForm,"permissions",o.concat([c])):r>-1&&e.$set(e.updateApiTokenForm,"permissions",o.slice(0,r).concat(o.slice(r+1)))}else e.$set(e.updateApiTokenForm,"permissions",l)}}}),t("span",{staticClass:"ml-2 text-sm text-gray-600"},[e._v(e._s(n))])])])}),0)]},proxy:!0},{key:"footer",fn:function(){return[t("jet-secondary-button",{nativeOn:{click:function(n){e.managingPermissionsFor=null}}},[e._v(" Nevermind ")]),t("jet-button",{staticClass:"ml-2",class:{"opacity-25":e.updateApiTokenForm.processing},attrs:{disabled:e.updateApiTokenForm.processing},nativeOn:{click:function(n){return e.updateApiToken.apply(null,arguments)}}},[e._v(" Save ")])]},proxy:!0}])}),t("jet-confirmation-modal",{attrs:{show:e.apiTokenBeingDeleted},on:{close:function(n){e.apiTokenBeingDeleted=null}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Delete API Token ")]},proxy:!0},{key:"content",fn:function(){return[e._v(" Are you sure you would like to delete this API token? ")]},proxy:!0},{key:"footer",fn:function(){return[t("jet-secondary-button",{nativeOn:{click:function(n){e.apiTokenBeingDeleted=null}}},[e._v(" Nevermind ")]),t("jet-danger-button",{staticClass:"ml-2",class:{"opacity-25":e.deleteApiTokenForm.processing},attrs:{disabled:e.deleteApiTokenForm.processing},nativeOn:{click:function(n){return e.deleteApiToken.apply(null,arguments)}}},[e._v(" Delete ")])]},proxy:!0}])})],1)},b=[],P=h(F,x,b,!1,null,null);const E=P.exports;export{E as default};
