import{J as s}from"./ActionMessage-C0uHe90t.js";import{J as i}from"./Modal-ChJjaleB.js";import{J as m}from"./Button-8hrt_dwt.js";import{J as l}from"./ConfirmationModal-D3u747N0.js";import{J as c}from"./DangerButton-D8UoYn71.js";import{J as u}from"./DialogModal-CnXURv-O.js";import{J as d,a as v}from"./Label-BNNDC3dx.js";import{J as p,a as f}from"./InputError-Dx9YIMf4.js";import{J as b}from"./SecondaryButton-2z-8QQ4A.js";import{J as g}from"./SectionBorder-_QZAHpvL.js";import{n as y}from"./_plugin-vue2_normalizer-p4i_2SC9.js";import"./SectionTitle-B1Xdl0zD.js";const _={components:{JetActionMessage:s,JetActionSection:i,JetButton:m,JetConfirmationModal:l,JetDangerButton:c,JetDialogModal:u,JetFormSection:v,JetInput:f,JetInputError:p,JetLabel:d,JetSecondaryButton:b,JetSectionBorder:g},props:["team","availableRoles","userPermissions"],data(){return{addTeamMemberForm:this.$inertia.form({email:"",role:null},{bag:"addTeamMember",resetOnSuccess:!0}),updateRoleForm:this.$inertia.form({role:null},{bag:"updateRole",resetOnSuccess:!1}),leaveTeamForm:this.$inertia.form({},{bag:"leaveTeam"}),removeTeamMemberForm:this.$inertia.form({},{bag:"removeTeamMember"}),currentlyManagingRole:!1,managingRoleFor:null,confirmingLeavingTeam:!1,teamMemberBeingRemoved:null}},methods:{addTeamMember(){this.addTeamMemberForm.post(route("team-members.store",this.team),{preserveScroll:!0})},manageRole(a){this.managingRoleFor=a,this.updateRoleForm.role=a.membership.role,this.currentlyManagingRole=!0},updateRole(){this.updateRoleForm.put(route("team-members.update",[this.team,this.managingRoleFor]),{preserveScroll:!0}).then(()=>{this.currentlyManagingRole=!1})},confirmLeavingTeam(){this.confirmingLeavingTeam=!0},leaveTeam(){this.leaveTeamForm.delete(route("team-members.destroy",[this.team,this.$page.user]))},confirmTeamMemberRemoval(a){this.teamMemberBeingRemoved=a},removeTeamMember(){this.removeTeamMemberForm.delete(route("team-members.destroy",[this.team,this.teamMemberBeingRemoved]),{preserveScroll:!0,preserveState:!0}).then(()=>{this.teamMemberBeingRemoved=null})},displayableRole(a){return this.availableRoles.find(e=>e.key==a).name}}};var h=function(){var e=this,t=e._self._c;return t("div",[e.userPermissions.canAddTeamMembers?t("div",[t("jet-section-border"),t("jet-form-section",{on:{submitted:e.addTeamMember},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Add Team Member ")]},proxy:!0},{key:"description",fn:function(){return[e._v(" Add a new team member to your team, allowing them to collaborate with you. ")]},proxy:!0},{key:"form",fn:function(){return[t("div",{staticClass:"col-span-6"},[t("div",{staticClass:"max-w-xl text-sm text-gray-600"},[e._v(" Please provide the email address of the person you would like to add to this team. The email address must be associated with an existing account. ")])]),t("div",{staticClass:"col-span-6 sm:col-span-4"},[t("jet-label",{attrs:{for:"email",value:"Email"}}),t("jet-input",{staticClass:"mt-1 block w-full",attrs:{id:"email",type:"text"},model:{value:e.addTeamMemberForm.email,callback:function(r){e.$set(e.addTeamMemberForm,"email",r)},expression:"addTeamMemberForm.email"}}),t("jet-input-error",{staticClass:"mt-2",attrs:{message:e.addTeamMemberForm.error("email")}})],1),e.availableRoles.length>0?t("div",{staticClass:"col-span-6 lg:col-span-4"},[t("jet-label",{attrs:{for:"roles",value:"Role"}}),t("jet-input-error",{staticClass:"mt-2",attrs:{message:e.addTeamMemberForm.error("role")}}),t("div",{staticClass:"mt-1 border border-gray-200 rounded-lg cursor-pointer"},e._l(e.availableRoles,function(r,o){return t("div",{key:r.key,staticClass:"px-4 py-3",class:{"border-t border-gray-200":o>0},on:{click:function(n){e.addTeamMemberForm.role=r.key}}},[t("div",{class:{"opacity-50":e.addTeamMemberForm.role&&e.addTeamMemberForm.role!=r.key}},[t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"text-sm text-gray-600",class:{"font-semibold":e.addTeamMemberForm.role==r.key}},[e._v(" "+e._s(r.name)+" ")]),e.addTeamMemberForm.role==r.key?t("svg",{staticClass:"ml-2 h-5 w-5 text-green-400",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}})]):e._e()]),t("div",{staticClass:"mt-2 text-xs text-gray-600"},[e._v(" "+e._s(r.description)+" ")])])])}),0)],1):e._e()]},proxy:!0},{key:"actions",fn:function(){return[t("jet-action-message",{staticClass:"mr-3",attrs:{on:e.addTeamMemberForm.recentlySuccessful}},[e._v(" Added. ")]),t("jet-button",{class:{"opacity-25":e.addTeamMemberForm.processing},attrs:{disabled:e.addTeamMemberForm.processing}},[e._v(" Add ")])]},proxy:!0}],null,!1,3222071307)})],1):e._e(),e.team.users.length>0?t("div",[t("jet-section-border"),t("jet-action-section",{staticClass:"mt-10 sm:mt-0",scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Team Members ")]},proxy:!0},{key:"description",fn:function(){return[e._v(" All of the people that are part of this team. ")]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"space-y-6"},e._l(e.team.users,function(r){return t("div",{key:r.id,staticClass:"flex items-center justify-between"},[t("div",{staticClass:"flex items-center"},[t("img",{staticClass:"w-8 h-8 rounded-full",attrs:{src:r.profile_photo_url,alt:r.name}}),t("div",{staticClass:"ml-4"},[e._v(e._s(r.name))])]),t("div",{staticClass:"flex items-center"},[e.userPermissions.canAddTeamMembers&&e.availableRoles.length?t("button",{staticClass:"ml-2 text-sm text-gray-400 underline",on:{click:function(o){return e.manageRole(r)}}},[e._v(" "+e._s(e.displayableRole(r.membership.role))+" ")]):e.availableRoles.length?t("div",{staticClass:"ml-2 text-sm text-gray-400"},[e._v(" "+e._s(e.displayableRole(r.membership.role))+" ")]):e._e(),e.$page.user.id===r.id?t("button",{staticClass:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",on:{click:e.confirmLeavingTeam}},[e._v(" Leave ")]):e._e(),e.userPermissions.canRemoveTeamMembers?t("button",{staticClass:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",on:{click:function(o){return e.confirmTeamMemberRemoval(r)}}},[e._v(" Remove ")]):e._e()])])}),0)]},proxy:!0}],null,!1,3269174761)})],1):e._e(),t("jet-dialog-modal",{attrs:{show:e.currentlyManagingRole},on:{close:function(r){e.currentlyManagingRole=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Manage Role ")]},proxy:!0},{key:"content",fn:function(){return[e.managingRoleFor?t("div",[t("div",{staticClass:"mt-1 border border-gray-200 rounded-lg cursor-pointer"},e._l(e.availableRoles,function(r,o){return t("div",{key:r.key,staticClass:"px-4 py-3",class:{"border-t border-gray-200":o>0},on:{click:function(n){e.updateRoleForm.role=r.key}}},[t("div",{class:{"opacity-50":e.updateRoleForm.role&&e.updateRoleForm.role!=r.key}},[t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"text-sm text-gray-600",class:{"font-semibold":e.updateRoleForm.role==r.key}},[e._v(" "+e._s(r.name)+" ")]),e.updateRoleForm.role==r.key?t("svg",{staticClass:"ml-2 h-5 w-5 text-green-400",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}})]):e._e()]),t("div",{staticClass:"mt-2 text-xs text-gray-600"},[e._v(" "+e._s(r.description)+" ")])])])}),0)]):e._e()]},proxy:!0},{key:"footer",fn:function(){return[t("jet-secondary-button",{nativeOn:{click:function(r){e.currentlyManagingRole=!1}}},[e._v(" Nevermind ")]),t("jet-button",{staticClass:"ml-2",class:{"opacity-25":e.updateRoleForm.processing},attrs:{disabled:e.updateRoleForm.processing},nativeOn:{click:function(r){return e.updateRole.apply(null,arguments)}}},[e._v(" Save ")])]},proxy:!0}])}),t("jet-confirmation-modal",{attrs:{show:e.confirmingLeavingTeam},on:{close:function(r){e.confirmingLeavingTeam=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Leave Team ")]},proxy:!0},{key:"content",fn:function(){return[e._v(" Are you sure you would like to leave this team? ")]},proxy:!0},{key:"footer",fn:function(){return[t("jet-secondary-button",{nativeOn:{click:function(r){e.confirmingLeavingTeam=!1}}},[e._v(" Nevermind ")]),t("jet-danger-button",{staticClass:"ml-2",class:{"opacity-25":e.leaveTeamForm.processing},attrs:{disabled:e.leaveTeamForm.processing},nativeOn:{click:function(r){return e.leaveTeam.apply(null,arguments)}}},[e._v(" Leave ")])]},proxy:!0}])}),t("jet-confirmation-modal",{attrs:{show:e.teamMemberBeingRemoved},on:{close:function(r){e.teamMemberBeingRemoved=null}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Remove Team Member ")]},proxy:!0},{key:"content",fn:function(){return[e._v(" Are you sure you would like to remove this person from the team? ")]},proxy:!0},{key:"footer",fn:function(){return[t("jet-secondary-button",{nativeOn:{click:function(r){e.teamMemberBeingRemoved=null}}},[e._v(" Nevermind ")]),t("jet-danger-button",{staticClass:"ml-2",class:{"opacity-25":e.removeTeamMemberForm.processing},attrs:{disabled:e.removeTeamMemberForm.processing},nativeOn:{click:function(r){return e.removeTeamMember.apply(null,arguments)}}},[e._v(" Remove ")])]},proxy:!0}])})],1)},k=[],x=y(_,h,k,!1,null,null);const L=x.exports;export{L as default};
