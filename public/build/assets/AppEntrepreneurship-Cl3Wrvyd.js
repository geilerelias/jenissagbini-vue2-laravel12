import{n as r}from"./_plugin-vue2_normalizer-p4i_2SC9.js";const o={data:()=>({dialog:!1,headers:[{text:"Id",align:"left",sortable:!1,value:"id"},{text:"Titulo",value:"title"},{text:"Descripcion",value:"description"},{text:"Estado",value:"state"},{text:"Actions",value:"action",sortable:!1}],items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Proyectos",disabled:!1,href:"/dashboard/project"},{text:"Emprendimientos",disabled:!0,href:"/dashboard/project/entrepreneurship"}],entrepreneurships:[],editedIndex:-1,editedItem:{id:"",title:"",description:"",state:""},defaultItem:{id:"",title:"",description:"",state:""},states:["Abierto","Cerrado"],search:"",valid:!0,titleRules:[i=>!!i||"Titulo es requirido"],descriptionRules:[i=>!!i||"Descripción es requerida"],stateRules:[i=>!!i||"Estado es requerido"],lazy:!1}),computed:{formTitle(){return this.editedIndex===-1?"New Item":"Edit Item"}},watch:{dialog(i){i||this.close()}},mounted(){this.initialize()},methods:{initialize(){this.entrepreneurships=[{title:"HUMUS DEL CESAR S.A.S.",description:`
                        Socia de una empresa privada tipo S.A.S. dedicada a la producción y comercialización
                        de abonos orgánicos y a la prestación de servicios en diseño y elaboración de jardines.
                        Empresa que funcionó en Valledupar y se destacó por su liderazgo en la zona caribeña
                        pues sus productos y servicios tuvieron una cobertura significativa por su buena calidad y
                        excelente servicio a nivel institucional para clientes como Homecenter, Centro Comercial Guatapurí Plaza
                        y profesionales independientes del sector agrícola.
                      `,state:"cerrado",id:0}],this.axios.get("/api/entrepreneurship").then(i=>{this.entrepreneurships=this.entrepreneurships.concat(i.data)}).catch(i=>{console.log(i)})},editItem(i){this.editedIndex=this.entrepreneurships.indexOf(i),this.editedItem=Object.assign({},i),this.dialog=!0},deleteItem(i){const e=this.entrepreneurships.indexOf(i);Swal.fire({title:"Estás seguro?",html:`Eliminar <b>${i.title}</b>, No podrás revertir esto!`,type:"warning",showCancelButton:!0,confirmButtonColor:"#424242",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!"}).then(t=>{console.log("item.id",i.id),t.value&&axios.delete(`/api/entrepreneurship/${i.id}`).then(s=>{Swal.fire("Eliminado!","Eliminado correctamente.","success"),this.entrepreneurships.splice(e,1)}).catch(s=>{Swal.fire("Oops...","Algo salió mal!"+s,"error")})})},close(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},save(){if(this.validate())if(this.editedIndex>-1)this.edit();else{const i=this.editedItem;axios.post("/api/entrepreneurship",i).then(e=>{const t=e.data;this.entrepreneurships.push(t),Swal.fire("Buen trabajo! 😃","Registro Exitoso! ","success")}).catch(e=>{console.error(e)}),this.close()}else Swal.fire({type:"error",title:"Oops...",text:"Campos no validados!"})},edit(){const i=this.editedItem,e=this.editedIndex,t=this.editedItem;axios.put(`/api/entrepreneurship/${this.entrepreneurships[e].id}`,i).then(s=>{Object.assign(this.entrepreneurships[e],t),Swal.fire("Buen trabajo!","Editado correctamente!","success"),this.close()}).catch(s=>{Swal.fire({type:"error",title:"Oops...",text:"Algo salió mal!"})})},validate(){return this.$refs.form.validate()?!0:(console.log("fallo la validacion"),!1)},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()}}};var n=function(){var e=this,t=e._self._c;return t("v-app",[t("v-breadcrumbs",{attrs:{items:e.items}}),t("v-card",[t("v-toolbar",{attrs:{dark:"",flat:""}},[t("v-btn",{attrs:{icon:""},on:{click:function(s){return e.$router.push({name:"project/main"})}}},[t("v-icon",[e._v("mdi-arrow-left")])],1),t("v-toolbar-title",[e._v("Emprendimientos ")]),t("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t("div",{staticClass:"flex-grow-1"}),t("v-text-field",{attrs:{"max-width":"200","append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(s){e.search=s},expression:"search"}}),t("v-btn",{attrs:{icon:""},on:{click:function(s){e.dialog=!e.dialog}}},[t("v-icon",[e._v("mdi-plus-circle")])],1)],1),t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,search:e.search,items:e.entrepreneurships},scopedSlots:e._u([{key:"item.action",fn:function({item:s}){return[t("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItem(s)}}},[e._v(" mdi-pencil ")]),t("v-icon",{attrs:{small:""},on:{click:function(a){return e.deleteItem(s)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0}])})],1),t("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(s){e.dialog=s},expression:"dialog"}},[t("v-card",[t("v-toolbar",{attrs:{dark:""}},[t("v-btn",{attrs:{icon:"",dark:""},on:{click:function(s){e.dialog=!e.dialog}}},[t("v-icon",[e._v("mdi-close")])],1),t("v-toolbar-title",{staticClass:"headline"},[e._v(e._s(e.formTitle))]),t("div",{staticClass:"flex-grow-1"}),t("v-toolbar-items",[t("v-btn",{staticClass:"mr-4",attrs:{text:"",disabled:!e.valid},on:{click:e.validate}},[e._v(" Registrar ")])],1)],1),t("v-card-text",[t("v-container",[t("v-form",{ref:"form",attrs:{"lazy-validation":e.lazy},model:{value:e.valid,callback:function(s){e.valid=s},expression:"valid"}},[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{rules:e.titleRules,label:"Título"},model:{value:e.editedItem.title,callback:function(s){e.$set(e.editedItem,"title",s)},expression:"editedItem.title"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-textarea",{attrs:{rules:e.descriptionRules,label:"Descripción"},model:{value:e.editedItem.description,callback:function(s){e.$set(e.editedItem,"description",s)},expression:"editedItem.description"}})],1),t("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t("v-select",{attrs:{rules:e.stateRules,items:e.states,"menu-props":{top:!0,offsetY:!0},label:"Estado"},model:{value:e.editedItem.state,callback:function(s){e.$set(e.editedItem,"state",s)},expression:"editedItem.state"}})],1)],1)],1)],1)],1),t("v-card-actions",[t("div",{staticClass:"flex-grow-1"}),t("v-btn",{staticClass:"mr-4",attrs:{color:"warning"},on:{click:e.close}},[e._v(" Cancelar ")]),t("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" Reiniciar ")]),t("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success"},on:{click:e.save}},[e._v(" Guardar ")])],1)],1)],1)],1)},l=[],d=r(o,n,l,!1,null,"bee1e43e");const u=d.exports;export{u as default};
