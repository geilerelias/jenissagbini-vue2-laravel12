import{P as r}from"./PictureInput-B0ONgMPm.js";import s from"./moment-VWIv8QY3.js";import l from"./Links-DMMlK3na.js";import{A as c}from"./AppLayout-BImsDSli.js";import{B as u}from"./BreadCrumbs-BH02ZRtw.js";import{n as d}from"./_plugin-vue2_normalizer-p4i_2SC9.js";import"./SettingsDropdown-D9hkqat8.js";import"./app-BzUSuKBB.js";import"./logo-Cxn_AZdb.js";s.locale("es");const m={components:{"picture-input":r,"links-component":l,AppLayout:c,BreadCrumbs:u},props:["notice"],data:()=>({prefill:"",imageMiniatura:"",menu:!1,menu2:!1,valid:!0,lazy:!1,snackbar:!1,response:"",newNotice:{id:"",image:"",title:"",city:"",date:"",time:"",description:"",links:[]},titleRules:[a=>!!a||"El t√≠tulo es requerido",a=>a&&a.length<=60||"El t√≠tulo no puede tener mas de 60 caracteres"],cityRules:[a=>!!a||"La ciudad o lugar son requeridas"],dateRules:[a=>!!a||"La fecha es requerida"],timeRules:[a=>!!a||"La hora es requerida"],descriptionRules:[a=>!!a||"La descripci√≥n es requerida"],imageRules:[a=>!a||a.size<5e6||"El tama√±o de la imagen debe ser inferior a 5 MB!"],customStrings:{upload:"<p> Su dispositivo no admite la carga de archivos. </p>",drag:"Arrastre una imagen o <br> haga clic aqu√≠ para seleccionar üòº",tap:"Toque aqu√≠ para seleccionar una foto <br> de su galer√≠a",change:"Cambiar",remove:"Eliminar",select:"Selecciona una foto",fileType:"Este tipo de archivo no es compatible."},items:[{text:"Dashboard",disabled:!1,href:"/dashboard"},{text:"Noticias",disabled:!1,href:"/notices"},{text:"Editar",disabled:!0,href:"#"}]}),mounted:function(){this.notice.links=JSON.parse(this.notice.links),this.prefill=encodeURI("/storage/"+this.notice.image),console.log(this.prefill)},methods:{closeDialog(){this.$emit("closeDialog",!1)},onChange(a){console.log("New picture selected!"),a?this.notice.image=this.$refs.pictureInput.file:console.log("FileReader API not supported: use the <form>, Luke!")},editNotice(){console.log("edit notice"),this.notice.image=this.$refs.pictureInput.file;let a=new FormData;a.append("image",this.notice.image),a.append("title",this.notice.title),a.append("city",this.notice.city),a.append("date",this.notice.date),a.append("time",this.notice.time),a.append("description",this.notice.description);let e=this.notice.links;a.append("links",JSON.stringify(e)),console.log(this.notice);try{axios.post(`/notices/update/${this.notice.id}`,a).then(t=>{this.$swal("Editada!","Su noticia ha sido editada exitosamente!","success").then(i=>{this.$inertia.get(route("notices.index"))})}).catch(t=>{const i=t.response.data.errors;let n="";for(var o in i)n+=o+": "+i[o]+`
 `;this.$swal("Error!",n,"error")})}catch(t){console.log(t)}},validate(){this.$refs.form.validate()&&this.editNotice()},reset(){this.$refs.form.reset()},resetValidation(){this.$refs.form.resetValidation()}},computed:{computedDateFormattedMomentjs(){return this.notice.date?s(this.notice.date).format("dddd, D MMMM YYYY"):""}}};var p=function(){var e=this,t=e._self._c;return t("AppLayout",[t("bread-crumbs",{attrs:{name:"Editar noticias",items:e.items}}),t("v-container",{attrs:{fluid:""}},[t("v-card",{staticClass:"rounded-0"},[t("v-container",{attrs:{fluid:""}},[t("v-card-text",[t("v-form",{ref:"form",attrs:{"lazy-validation":e.lazy,enctype:"multipart/form-data"},on:{submit:function(i){return i.preventDefault(),e.editNotice.apply(null,arguments)}},model:{value:e.valid,callback:function(i){e.valid=i},expression:"valid"}},[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("picture-input",{ref:"pictureInput",attrs:{prefill:e.prefill,crop:!1,width:e.$vuetify.breakpoint.xsOnly?300:1e3,height:e.$vuetify.breakpoint.xsOnly?200:300,zIndex:0,accept:"image/jpeg,image/png,,image/jpg",removable:!0,"button-class":"v-btn v-btn--contained theme--light v-size--small info",removeButtonClass:"v-btn v-btn--contained theme--light v-size--small error",customStrings:e.customStrings},on:{change:e.onChange}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{clearable:"",rules:e.titleRules,label:"T√≠tulo",required:"",counter:"60"},model:{value:e.notice.title,callback:function(i){e.$set(e.notice,"title",i)},expression:"notice.title"}})],1),t("v-col",{attrs:{sm:"4",cols:"12"}},[t("v-text-field",{attrs:{clearable:"",rules:e.cityRules,label:"Ciudad o lugar",required:""},model:{value:e.notice.city,callback:function(i){e.$set(e.notice,"city",i)},expression:"notice.city"}})],1),t("v-col",{attrs:{sm:"4",cols:"12"}},[t("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t("v-text-field",e._g({attrs:{value:e.computedDateFormattedMomentjs,rules:e.dateRules,clearable:"",label:"Fecha",readonly:""}},i))]}}]),model:{value:e.menu,callback:function(i){e.menu=i},expression:"menu"}},[t("v-date-picker",{attrs:{locale:"es"},on:{change:function(i){e.menu=!1}},model:{value:e.notice.date,callback:function(i){e.$set(e.notice,"date",i)},expression:"notice.date"}})],1)],1),t("v-col",{attrs:{sm:"4",cols:"12"}},[t("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.notice.time,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(i){return e.$set(e.notice,"time",i)},"update:return-value":function(i){return e.$set(e.notice,"time",i)}},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t("v-text-field",e._g({attrs:{label:"Hora",rules:e.timeRules,readonly:""},model:{value:e.notice.time,callback:function(n){e.$set(e.notice,"time",n)},expression:"notice.time"}},i))]}}]),model:{value:e.menu2,callback:function(i){e.menu2=i},expression:"menu2"}},[e.menu2?t("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(i){return e.$refs.menu.save(e.notice.time)}},model:{value:e.notice.time,callback:function(i){e.$set(e.notice,"time",i)},expression:"notice.time"}}):e._e()],1)],1)],1),t("v-label",{attrs:{for:"myTextEditor"}},[e._v("Descripci√≥n")]),t("vue-editor",{ref:"myTextEditor",attrs:{rules:e.descriptionRules},model:{value:e.notice.description,callback:function(i){e.$set(e.notice,"description",i)},expression:"notice.description"}})],1)],1),t("links-component",{ref:"linksComponets",staticClass:"mt-4",attrs:{link:Array.isArray(e.notice.links)?e.notice.links:JSON.parse(e.notice.links)},on:{addLink:function(i){e.notice.links=i}}}),t("v-card-actions",[t("div",{staticClass:"flex-grow-1"}),t("v-btn",{staticClass:"mr-4",attrs:{color:"warning"},on:{click:e.reset}},[e._v(" Reset Form ")]),t("v-btn",{staticClass:"mr-4",attrs:{color:"success",disabled:!e.valid},on:{click:e.validate}},[e._v(" Editar ")])],1)],1)],1)],1)],1)},f=[],v=d(m,p,f,!1,null,null);const w=v.exports;export{w as default};
